# üî• **Chi Ti·∫øt & S√¢u S·∫Øc H∆°n: Authorization trong Keycloak ‚Äì T∆∞ Duy T·ª´ng B∆∞·ªõc M·ªôt**

> https://chatgpt.com/share/67db6e84-e8e8-800c-b817-93cde08c204c
> 
> **M·ª•c ti√™u c·ªßa b√†i vi·∫øt:** Gi·∫£i th√≠ch t·ª´ng b∆∞·ªõc ho·∫°t ƒë·ªông c·ªßa Authorization trong Keycloak theo c√°ch gi√∫p b·∫°n **hi·ªÉu c·ªët l√µi**, **c√≥ th·ªÉ t∆∞ duy l·∫°i**, v√† **bi·∫øt c√°ch tri·ªÉn khai th·ª±c t·∫ø**.

---

## üöÄ **Th·ª© T·ª± Ch√≠nh X√°c C·ªßa Authorization Trong Keycloak**

### 1Ô∏è‚É£ **T√†i nguy√™n n√†o ƒëang ƒë∆∞·ª£c b·∫£o v·ªá? (Resource)**
### 2Ô∏è‚É£ **H√†nh ƒë·ªông n√†o c√≥ th·ªÉ ƒë∆∞·ª£c th·ª±c hi·ªán? (Scope)**
### 3Ô∏è‚É£ **Khi n√†o Keycloak cho ph√©p ho·∫∑c t·ª´ ch·ªëi truy c·∫≠p? (Policy)**
### 4Ô∏è‚É£ **Ai c√≥ quy·ªÅn th·ª±c hi·ªán h√†nh ƒë·ªông n√†y? (Permission)**
### 5Ô∏è‚É£ **L√†m sao ki·ªÉm tra quy·ªÅn khi c√≥ y√™u c·∫ßu? (Policy Enforcement & Decision Making)**

---

## üü¢ **1Ô∏è‚É£ T√†i nguy√™n n√†o ƒëang ƒë∆∞·ª£c b·∫£o v·ªá? (Resource)**
### üîπ **T∆∞ duy n·ªÅn t·∫£ng:**
> "B·∫°n kh√¥ng th·ªÉ b·∫£o v·ªá c√°i g√¨ n·∫øu ch∆∞a bi·∫øt n√≥ l√† g√¨."

T√†i nguy√™n (**Resource**) ch√≠nh l√† nh·ªØng ƒë·ªëi t∆∞·ª£ng trong h·ªá th·ªëng m√† ta c·∫ßn ki·ªÉm so√°t quy·ªÅn truy c·∫≠p.

üîπ **Resource c√≥ th·ªÉ l√†:**
- M·ªôt **endpoint API** ‚Üí `/api/orders`
- M·ªôt **file** ‚Üí `/files/secure.pdf`
- M·ªôt **giao di·ªán ng∆∞·ªùi d√πng** ‚Üí `/dashboard`
- M·ªôt **b·∫£n ghi d·ªØ li·ªáu** ‚Üí ID c·ª• th·ªÉ trong database (`orderId = 123`)

### üîπ **C√°ch thi·∫øt l·∫≠p Resource trong Keycloak:**
1. **V√†o Keycloak Admin Console** ‚Üí **Clients** ‚Üí Ch·ªçn `my-client`
2. **V√†o tab Authorization** ‚Üí **Resources** ‚Üí **Create Resource**
3. **ƒê·ªãnh nghƒ©a Resource:**
    - **Name:** `Orders API`
    - **Type:** `API`
    - **URI:** `/api/orders/*`
    - **Owner:** `my-client`
4. **Nh·∫•n Save**

üîπ **V√¨ sao Resource ph·∫£i ƒë∆∞·ª£c t·∫°o tr∆∞·ªõc?**
- N·∫øu kh√¥ng c√≥ Resource, b·∫°n kh√¥ng th·ªÉ ki·ªÉm so√°t quy·ªÅn truy c·∫≠p.
- N·∫øu b·∫°n kh√¥ng ƒë·ªãnh nghƒ©a r√µ ƒë√¢u l√† "t√†i nguy√™n", h·ªá th·ªëng kh√¥ng th·ªÉ ph√¢n bi·ªát quy·ªÅn truy c·∫≠p kh√°c nhau.

üìå **V√≠ d·ª• c·ª• th·ªÉ:**

| **Resource** | **URI** | **M√¥ t·∫£** |
|-------------|--------|----------|
| Orders API | `/api/orders/*` | API qu·∫£n l√Ω ƒë∆°n h√†ng |
| Reports | `/api/reports/*` | API xu·∫•t b√°o c√°o |
| Admin Dashboard | `/admin/*` | Trang qu·∫£n tr·ªã h·ªá th·ªëng |

---

## üü° **2Ô∏è‚É£ H√†nh ƒë·ªông n√†o c√≥ th·ªÉ ƒë∆∞·ª£c th·ª±c hi·ªán? (Scope)**
### üîπ **T∆∞ duy n·ªÅn t·∫£ng:**
> "B·∫°n kh√¥ng th·ªÉ g√°n quy·ªÅn n·∫øu ch∆∞a bi·∫øt nh·ªØng h√†nh ƒë·ªông n√†o c·∫ßn ki·ªÉm so√°t."

üîπ **Scope (Ph·∫°m vi quy·ªÅn) l√† g√¨?**
- **Scope x√°c ƒë·ªãnh c√°c thao t√°c c√≥ th·ªÉ th·ª±c hi·ªán tr√™n m·ªôt Resource**.
- **Scope KH√îNG PH·∫¢I l√† HTTP method (`GET`, `POST`, ...)**, m√† b·∫°n **t·ª± ƒë·ªãnh nghƒ©a**.

üîπ **Scope c√≥ th·ªÉ l√†:**
- `read` ‚Üí ƒê·ªçc t√†i nguy√™n
- `write` ‚Üí Ghi t√†i nguy√™n
- `delete` ‚Üí X√≥a t√†i nguy√™n
- `export` ‚Üí Xu·∫•t d·ªØ li·ªáu

### üîπ **C√°ch thi·∫øt l·∫≠p Scope trong Keycloak**
1. **V√†o Keycloak Admin Console** ‚Üí **Clients** ‚Üí `my-client`
2. **V√†o tab Authorization** ‚Üí **Scopes** ‚Üí **Create Scope**
3. **ƒê·ªãnh nghƒ©a Scope:**
    - `read`
    - `write`
    - `delete`
4. **G√°n Scope v√†o Resource**
    - V√†o **Resources** ‚Üí Ch·ªçn `Orders API`
    - Trong **Scopes**, ch·ªçn `read`, `write`, `delete`
    - **Save**

üìå **V√≠ d·ª• c·ª• th·ªÉ:**

| **Resource** | **Scope** | **M√¥ t·∫£** |
|-------------|----------|----------|
| Orders API | `read`, `write`, `delete` | Ph√¢n quy·ªÅn ƒë·ªçc, ghi, x√≥a ƒë∆°n h√†ng |
| Reports API | `view`, `export` | Ph√¢n quy·ªÅn xem v√† xu·∫•t b√°o c√°o |

---

## üîµ **3Ô∏è‚É£ Khi n√†o Keycloak cho ph√©p ho·∫∑c t·ª´ ch·ªëi truy c·∫≠p? (Policy)**
### üîπ **T∆∞ duy n·ªÅn t·∫£ng:**
> "Tr∆∞·ªõc khi c·∫•p quy·ªÅn, ta ph·∫£i x√°c ƒë·ªãnh ƒëi·ªÅu ki·ªán n√†o ƒë·ªÉ c·∫•p ph√©p."

üîπ **Policy l√† n∆°i ƒë·ªãnh nghƒ©a ƒëi·ªÅu ki·ªán c·∫•p quy·ªÅn**, c√≥ th·ªÉ d·ª±a tr√™n:
- **Role** (Role Policy)
- **Th·ªùi gian** (Time Policy)
- **IP** (IP Policy)
- **User Attributes** (User Policy)
- **Custom Logic** (JavaScript Policy)
- **K·∫øt h·ª£p nhi·ªÅu ƒëi·ªÅu ki·ªán** (Aggregated Policy)

### üîπ **C√°ch thi·∫øt l·∫≠p Policy trong Keycloak**
1. **V√†o Clients** ‚Üí Ch·ªçn `my-client`
2. **V√†o tab Authorization** ‚Üí **Policies** ‚Üí **Create Policy**
3. **Ch·ªçn lo·∫°i Policy:**
    - Role Policy ‚Üí Ch·ªâ admin ƒë∆∞·ª£c ph√©p (`admin-policy`)
    - Time Policy ‚Üí Ch·ªâ truy c·∫≠p t·ª´ 9h - 17h (`working-hours-policy`)
    - IP Policy ‚Üí Ch·ªâ t·ª´ m·∫°ng n·ªôi b·ªô (`internal-ip-policy`)
    - JavaScript Policy ‚Üí Email ph·∫£i l√† `@company.com`

üìå **V√≠ d·ª• c·ª• th·ªÉ:**

| **Policy** | **ƒêi·ªÅu ki·ªán** | **M√¥ t·∫£** |
|-----------|-------------|----------|
| Admin Policy | Role = `admin` | Ch·ªâ admin ƒë∆∞·ª£c x√≥a ƒë∆°n h√†ng |
| Working Hours Policy | 9:00 - 17:00 | Ch·ªâ ƒë∆∞·ª£c truy c·∫≠p gi·ªù h√†nh ch√≠nh |
| Internal Network Policy | IP = `192.168.1.0/24` | Ch·ªâ cho ph√©p t·ª´ m·∫°ng n·ªôi b·ªô |

---

## üü† **4Ô∏è‚É£ Ai c√≥ quy·ªÅn th·ª±c hi·ªán h√†nh ƒë·ªông n√†y? (Permission)**
### üîπ **T∆∞ duy n·ªÅn t·∫£ng:**
> "Sau khi c√≥ ƒëi·ªÅu ki·ªán c·∫•p quy·ªÅn, ta c·∫ßn g√°n quy·ªÅn cho ai ƒë∆∞·ª£c ph√©p l√†m g√¨."

üîπ **Permission x√°c ƒë·ªãnh ai c√≥ quy·ªÅn th·ª±c hi·ªán Scope tr√™n Resource.**
- **Permission c√≥ th·ªÉ √°p d·ª•ng cho Role, User, Group, ho·∫∑c Client.**
- **M·ªôt Permission c√≥ th·ªÉ c√≥ nhi·ªÅu Policy.**

### üîπ **C√°ch thi·∫øt l·∫≠p Permission trong Keycloak**
1. **V√†o Clients** ‚Üí Ch·ªçn `my-client`
2. **V√†o tab Authorization** ‚Üí **Permissions** ‚Üí **Create Permission**
3. **Ch·ªçn Scope-Based Permission**
    - **Resource:** `Orders API`
    - **Scope:** `read`, `write`, `delete`
    - **Policies:** `Admin Policy`, `Working Hours Policy`
    - **Save**

üìå **V√≠ d·ª• c·ª• th·ªÉ:**

| **Resource** | **Scope** | **Permission** | **Policy √°p d·ª•ng** |
|-------------|----------|---------------|------------------|
| `/api/orders` | `read` | User Read Orders | User Policy |
| `/api/orders` | `delete` | Admin Delete Orders | Admin Policy + Working Hours Policy |

---

## üî¥ **5Ô∏è‚É£ L√†m sao ki·ªÉm tra quy·ªÅn khi c√≥ y√™u c·∫ßu? (Policy Enforcement & Decision Making)**
### üîπ **T∆∞ duy n·ªÅn t·∫£ng:**
> "Cu·ªëi c√πng, h·ªá th·ªëng ph·∫£i ki·ªÉm tra v√† quy·∫øt ƒë·ªãnh c√≥ c·∫•p quy·ªÅn kh√¥ng."

üîπ **Khi c√≥ request, Keycloak ki·ªÉm tra:**
- **Access Token c√≥ h·ª£p l·ªá kh√¥ng?**
- **Scope trong Token c√≥ ph√π h·ª£p v·ªõi Resource kh√¥ng?**
- **User c√≥ Role ph√π h·ª£p kh√¥ng?**
- **Policy c√≥ cho ph√©p kh√¥ng?**

üìå **V√≠ d·ª• ki·ªÉm tra b·∫±ng API:**
1Ô∏è‚É£ **L·∫•y Access Token**
```bash
curl -X POST "http://localhost:8080/realms/myrealm/protocol/openid-connect/token" \
-d "client_id=my-client" \
-d "grant_type=password" \
-d "username=user1" \
-d "password=123456"
```

2Ô∏è‚É£ **G·ª≠i request ƒë·∫øn API**
```bash
curl -X GET "http://localhost:8080/api/orders" \
-H "Authorization: Bearer <access_token>"
```
- N·∫øu c√≥ Scope `read` ‚Üí ‚úÖ **Cho ph√©p**
- N·∫øu kh√¥ng c√≥ Scope `read` ‚Üí ‚ùå **T·ª´ ch·ªëi**

---

## üî• **K·∫øt Lu·∫≠n**
- **Authorization trong Keycloak di·ªÖn ra theo th·ª© t·ª± logic v√† c√≥ th·ªÉ t∆∞ duy l·∫°i d·ªÖ d√†ng.**
- **L√†m theo ƒë√∫ng c√°c b∆∞·ªõc tr√™n gi√∫p b·∫°n hi·ªÉu c·ªët l√µi v√† tri·ªÉn khai ch√≠nh x√°c.**
- **S·ª≠ d·ª•ng Policy gi√∫p ki·ªÉm so√°t quy·ªÅn truy c·∫≠p linh ho·∫°t h∆°n Role-Based Access Control (RBAC).**

=====
=====

# üî• **Role Ho·∫°t ƒê·ªông V·ªõi Policy v√† Permission Trong Keycloak ‚Äì Hi·ªÉu T∆∞·ªùng T·∫≠n**

**Role**, **Policy**, v√† **Permission** l√† 3 th√†nh ph·∫ßn quan tr·ªçng trong h·ªá th·ªëng **Authorization** c·ªßa Keycloak. Hi·ªÉu r√µ c√°ch ch√∫ng ho·∫°t ƒë·ªông c√πng nhau s·∫Ω gi√∫p b·∫°n **t·∫°o h·ªá th·ªëng ph√¢n quy·ªÅn linh ho·∫°t, b·∫£o m·∫≠t**.

---

## üöÄ **T√≥m T·∫Øt M·ªëi Quan H·ªá Gi·ªØa Role, Policy v√† Permission**
| **Th√†nh ph·∫ßn** | **Ch·ª©c nƒÉng** | **V√≠ d·ª• th·ª±c t·∫ø** |
|--------------|-------------|----------------|
| **Role** | X√°c ƒë·ªãnh vai tr√≤ c·ªßa user trong h·ªá th·ªëng | `admin`, `manager`, `user`, `order_manager` |
| **Policy** | ƒê·ªãnh nghƒ©a ƒëi·ªÅu ki·ªán c·∫•p quy·ªÅn d·ª±a tr√™n Role, th·ªùi gian, IP, v.v. | Ch·ªâ `admin` ƒë∆∞·ª£c x√≥a ƒë∆°n h√†ng, ch·ªâ cho ph√©p truy c·∫≠p t·ª´ 9h - 17h |
| **Permission** | Li√™n k·∫øt Policy v·ªõi Resource v√† Scope ƒë·ªÉ ki·ªÉm so√°t quy·ªÅn | Cho ph√©p `admin` th·ª±c hi·ªán `delete` tr√™n `/api/orders` |

üîπ **T∆∞ duy ƒë∆°n gi·∫£n:**
- **Role** x√°c ƒë·ªãnh "Ai c√≥ quy·ªÅn?"
- **Policy** x√°c ƒë·ªãnh "Khi n√†o c·∫•p quy·ªÅn?"
- **Permission** x√°c ƒë·ªãnh "C·∫•p quy·ªÅn g√¨ tr√™n t√†i nguy√™n n√†o?"

---

## üü¢ **1Ô∏è‚É£ Role Ho·∫°t ƒê·ªông Nh∆∞ Th·∫ø N√†o?**
### üîπ **T∆∞ duy n·ªÅn t·∫£ng:**
> "Role l√† danh x∆∞ng, nh∆∞ng n√≥ kh√¥ng t·ª± ƒë·ªông c·∫•p quy·ªÅn ‚Äì c·∫ßn c√≥ Policy v√† Permission."

üîπ **Role KH√îNG t·ª± ƒë·ªông c·∫•p quy·ªÅn** cho User. N√≥ ch·ªâ l√† m·ªôt **danh x∆∞ng** (label).

üîπ **C√≥ 2 lo·∫°i Role:**  
1Ô∏è‚É£ **Realm Role** ‚Üí D√πng tr√™n to√†n h·ªá th·ªëng (VD: `admin`, `user`)  
2Ô∏è‚É£ **Client Role** ‚Üí Ch·ªâ c√≥ t√°c d·ª•ng trong 1 client (VD: `order_manager` trong `my-client`)

üìå **V√≠ d·ª• c·ª• th·ªÉ:**
- `admin` c√≥ quy·ªÅn **x√≥a ƒë∆°n h√†ng**, **xem b√°o c√°o**.
- `user` ch·ªâ c√≥ quy·ªÅn **xem ƒë∆°n h√†ng**, **kh√¥ng th·ªÉ x√≥a**.
- `order_manager` ch·ªâ c√≥ quy·ªÅn **qu·∫£n l√Ω ƒë∆°n h√†ng** trong `my-client`.

---

## üü° **2Ô∏è‚É£ Policy Ho·∫°t ƒê·ªông Nh∆∞ Th·∫ø N√†o?**
### üîπ **T∆∞ duy n·ªÅn t·∫£ng:**
> "Policy l√† ƒëi·ªÅu ki·ªán ki·ªÉm tra xem Role c√≥ ƒë∆∞·ª£c c·∫•p quy·ªÅn hay kh√¥ng."

üîπ **Policy ki·ªÉm tra m·ªôt s·ªë ƒëi·ªÅu ki·ªán tr∆∞·ªõc khi c·∫•p quy·ªÅn:**
- **Role Policy:** N·∫øu user c√≥ role `admin`, cho ph√©p truy c·∫≠p.
- **Time Policy:** Ch·ªâ cho ph√©p truy c·∫≠p t·ª´ **9:00 - 17:00**.
- **IP Policy:** Ch·ªâ ch·∫•p nh·∫≠n truy c·∫≠p t·ª´ **192.168.1.0/24**.
- **User Policy:** Ch·ªâ user c·ª• th·ªÉ (`user1`) ƒë∆∞·ª£c truy c·∫≠p.
- **JavaScript Policy:** Ch·ªâ user c√≥ email `@company.com` ƒë∆∞·ª£c truy c·∫≠p.

üìå **V√≠ d·ª• c·ª• th·ªÉ:**

| **Policy** | **Lo·∫°i** | **ƒêi·ªÅu ki·ªán c·∫•p quy·ªÅn** |
|-----------|---------|------------------|
| `Admin Policy` | Role-based | Ch·ªâ `admin` c√≥ quy·ªÅn truy c·∫≠p |
| `Working Hours Policy` | Time-based | Ch·ªâ t·ª´ **09:00 - 17:00** |
| `Internal Network Policy` | IP-based | Ch·ªâ t·ª´ m·∫°ng **192.168.1.0/24** |

---

## üîµ **3Ô∏è‚É£ Permission Ho·∫°t ƒê·ªông Nh∆∞ Th·∫ø N√†o?**
### üîπ **T∆∞ duy n·ªÅn t·∫£ng:**
> "Permission l√† n∆°i ch√≠nh th·ª©c c·∫•p quy·ªÅn sau khi Policy ki·ªÉm tra."

üîπ **Permission li√™n k·∫øt 3 y·∫øu t·ªë:**
1. **Resource (T√†i nguy√™n)** ‚Üí C√°i g√¨ ƒëang ƒë∆∞·ª£c b·∫£o v·ªá? (`/api/orders`)
2. **Scope (Ph·∫°m vi quy·ªÅn)** ‚Üí H√†nh ƒë·ªông n√†o c√≥ th·ªÉ th·ª±c hi·ªán? (`read`, `delete`)
3. **Policy (ƒêi·ªÅu ki·ªán c·∫•p quy·ªÅn)** ‚Üí Khi n√†o c·∫•p quy·ªÅn? (`Admin Policy`, `Working Hours Policy`)

üìå **V√≠ d·ª• c·ª• th·ªÉ:**

| **Resource** | **Scope** | **Permission** | **Policy √Åp D·ª•ng** |
|-------------|----------|--------------|------------------|
| `/api/orders` | `read` | User Read Orders | User Policy |
| `/api/orders` | `delete` | Admin Delete Orders | Admin Policy + Working Hours Policy |

üí° **T∆∞ duy ƒë∆°n gi·∫£n:**
- **Permission l√† c·∫ßu n·ªëi gi·ªØa Resource v√† Policy.**
- N·∫øu Policy ki·ªÉm tra OK, Permission s·∫Ω c·∫•p quy·ªÅn cho User th·ª±c hi·ªán h√†nh ƒë·ªông c·ª• th·ªÉ.

---

## üîÑ **4Ô∏è‚É£ Lu·ªìng Ho·∫°t ƒê·ªông Gi·ªØa Role, Policy v√† Permission**
> **Khi user g·ª≠i y√™u c·∫ßu truy c·∫≠p API ho·∫∑c ·ª©ng d·ª•ng, Keycloak ki·ªÉm tra quy·ªÅn theo quy tr√¨nh sau:**

### **üîπ B∆∞·ªõc 1: User ƒëƒÉng nh·∫≠p ‚Üí L·∫•y Access Token**
1. User `user1` c√≥ Role `admin`.
2. H·ªá th·ªëng tr·∫£ v·ªÅ Access Token ch·ª©a th√¥ng tin Role.

### **üîπ B∆∞·ªõc 2: User g·ª≠i request ƒë·∫øn API**
```bash
curl -X DELETE "http://localhost:8080/api/orders/123" \
-H "Authorization: Bearer <access_token>"
```

### **üîπ B∆∞·ªõc 3: Keycloak ki·ªÉm tra Role c·ªßa User**
- User `user1` c√≥ Role `admin` ‚úÖ
- Role `admin` c√≥ Policy ph√π h·ª£p kh√¥ng?
   - `Admin Policy` ‚úÖ Pass
   - `Working Hours Policy` ‚úÖ Pass (gi·ªù l√†m vi·ªác h·ª£p l·ªá)

### **üîπ B∆∞·ªõc 4: Ki·ªÉm tra Permission**
- **Permission "Admin Delete Orders"** li√™n k·∫øt **Resource `/api/orders`** v·ªõi **Scope `delete`**.
- **N·∫øu Policy h·ª£p l·ªá, Permission c·∫•p quy·ªÅn ‚Üí API cho ph√©p th·ª±c hi·ªán l·ªánh x√≥a.**

---

## üéØ **T√≥m T·∫Øt: Role, Policy v√† Permission Ho·∫°t ƒê·ªông Nh∆∞ Th·∫ø N√†o?**

| **Th√†nh ph·∫ßn** | **Ch·ª©c nƒÉng** | **V√≠ d·ª•** |
|--------------|-------------|----------------|
| **Role** | X√°c ƒë·ªãnh user thu·ªôc nh√≥m n√†o | `admin`, `user`, `manager` |
| **Policy** | ƒê·ªãnh nghƒ©a ƒëi·ªÅu ki·ªán c·∫•p quy·ªÅn | Ch·ªâ `admin` ƒë∆∞·ª£c x√≥a ƒë∆°n h√†ng, ch·ªâ t·ª´ 9h - 17h |
| **Permission** | Li√™n k·∫øt Policy v·ªõi Resource & Scope | Cho ph√©p `admin` th·ª±c hi·ªán `delete` tr√™n `/api/orders` |

üîπ **T∆∞ duy t·ªïng qu√°t:**  
1Ô∏è‚É£ **Role ch·ªâ l√† nh√£n d√°n ‚Äì kh√¥ng t·ª± ƒë·ªông c·∫•p quy·ªÅn.**  
2Ô∏è‚É£ **Policy ki·ªÉm tra ƒëi·ªÅu ki·ªán tr∆∞·ªõc khi c·∫•p quy·ªÅn.**  
3Ô∏è‚É£ **Permission l√† c·∫ßu n·ªëi gi·ªØa Policy v√† Resource ƒë·ªÉ c·∫•p quy·ªÅn th·ª±c t·∫ø.**

üìå **V√≠ d·ª• cu·ªëi c√πng:**
- N·∫øu **admin** mu·ªën **x√≥a ƒë∆°n h√†ng**, c·∫ßn:  
  ‚úÖ **Role `admin`**  
  ‚úÖ **Policy `Admin Policy`** (Ch·ªâ admin m·ªõi ƒë∆∞·ª£c quy·ªÅn)  
  ‚úÖ **Policy `Working Hours Policy`** (Ch·ªâ t·ª´ 9h - 17h)  
  ‚úÖ **Permission `Admin Delete Orders`** (Cho ph√©p x√≥a tr√™n `/api/orders`)

üëâ N·∫øu **t·∫•t c·∫£ ƒëi·ªÅu ki·ªán ƒë·ªÅu ƒë√∫ng**, API **cho ph√©p truy c·∫≠p**. N·∫øu **b·∫•t k·ª≥ ƒëi·ªÅu ki·ªán n√†o kh√¥ng h·ª£p l·ªá**, API **tr·∫£ v·ªÅ l·ªói 403 Forbidden**.

---

## üöÄ **C√°ch T∆∞ Duy L·∫°i V·ªÅ Role, Policy & Permission**
- **Role KH√îNG t·ª± c·∫•p quy·ªÅn** ‚Üí Ph·∫£i c√≥ **Policy & Permission**.
- **Policy quy·∫øt ƒë·ªãnh ƒëi·ªÅu ki·ªán c·∫•p quy·ªÅn** ‚Üí C√≥ th·ªÉ d·ª±a tr√™n Role, IP, th·ªùi gian, User Attribute.
- **Permission l√† n∆°i ch√≠nh th·ª©c c·∫•p quy·ªÅn** ‚Üí Li√™n k·∫øt Resource, Scope v√† Policy.
- **Mu·ªën ki·ªÉm tra Authorization?** ‚Üí **Decode Access Token** ƒë·ªÉ xem Role.
- **Mu·ªën debug l·ªói Permission?** ‚Üí D√πng c√¥ng c·ª• **Evaluation trong Keycloak** ƒë·ªÉ ki·ªÉm tra quy·ªÅn.

---

üí° **N·∫øu b·∫°n hi·ªÉu r√µ c√°ch Role, Policy v√† Permission ho·∫°t ƒë·ªông c√πng nhau, b·∫°n c√≥ th·ªÉ thi·∫øt k·∫ø h·ªá th·ªëng Authorization trong Keycloak m·ªôt c√°ch ch√≠nh x√°c, linh ho·∫°t v√† b·∫£o m·∫≠t!** üöÄ